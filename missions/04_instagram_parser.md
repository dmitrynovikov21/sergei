# MISSION 04: INSTAGRAM PARSER WORKER (APIFY + REDIS)

## üéØ –¶–ï–õ–¨
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Reels/Posts) —Å Instagram-–∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Apify.
–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ (Worker), —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤.

## üõ† –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö
- **Apify Client:** SDK –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `apify/instagram-scraper` (–∏–ª–∏ `instagram-post-scraper`).
- **BullMQ:** –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (–º—ã —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –µ—ë –≤ –ø—Ä–æ—à–ª–æ–π –º–∏—Å—Å–∏–∏).
- **Prisma:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î.

## üìã –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠–¢–ê–ü 1: Database Schema (Prisma)
–î–æ–±–∞–≤—å –≤ `prisma/schema.prisma` —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥–µ–ª–∏ (—Å–æ–±–ª—é–¥–∞—è —Å–≤—è–∑–∏):

1. **Source** (–ò—Å—Ç–æ—á–Ω–∏–∫, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º —Å–ª–µ–¥–∏–º)
   - `id`: UUID
   - `username`: String (Unique)
   - `platform`: Enum (INSTAGRAM)
   - `isActive`: Boolean (Default: true)
   - `lastScrapedAt`: DateTime?
   - `avatarUrl`: String?

2. **ContentItem** (–ï–¥–∏–Ω–∏—Ü–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
   - `id`: UUID
   - `sourceId`: Relation to Source
   - `externalId`: String (Unique ID –∏–∑ Instagram)
   - `shortCode`: String (Unique, —á–∞—Å—Ç—å URL)
   - `type`: Enum (REEL, IMAGE, CAROUSEL)
   - `caption`: String? (DB Text)
   - `mediaUrl`: String?
   - `publishedAt`: DateTime (–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –ò–Ω—Å—Ç–µ)
   - `isTrend`: Boolean (Default: false)

3. **ContentMetric** (–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π - –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤)
   - `id`: UUID
   - `contentId`: Relation to ContentItem
   - `recordedAt`: DateTime (Default: now)
   - `views`: Int (BigInt safe)
   - `likes`: Int
   - `comments`: Int

*–ó–∞–¥–∞—á–∞:* –û–±–Ω–æ–≤–∏ —Å—Ö–µ–º—É, –∑–∞–ø—É—Å—Ç–∏ `npx prisma migrate dev --name add_content_parser`.

### –≠–¢–ê–ü 2: Apify Service (`lib/apify.ts`)
–°–æ–∑–¥–∞–π —Å–µ—Ä–≤–∏—Å-–æ–±–µ—Ä—Ç–∫—É.
1. –£—Å—Ç–∞–Ω–æ–≤–∏ `npm install apify-client`.
2. –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é `scrapeInstagramUser(username: string)`.
   - –ò—Å–ø–æ–ª—å–∑—É–π Actor: `apify/instagram-scraper` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π).
   - **Config:**
     - `usernames`: [username]
     - `resultsLimit`: 30 (–° –∑–∞–ø–∞—Å–æ–º –Ω–∞ 14 –¥–Ω–µ–π, –æ–±—ã—á–Ω–æ –ø–æ—Å—Ç—è—Ç 1-2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å).
     - `searchType`: "posts"
   - –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å "—á–∏—Å—Ç—ã–π" –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –∫ –Ω–∞—à–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

### –≠–¢–ê–ü 3: The Worker Logic (`workers/parser.worker.ts`)
–≠—Ç–æ "—Å–µ—Ä–¥—Ü–µ" —Å–∏—Å—Ç–µ–º—ã.
1. –í–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á—É: `{ type: 'SCRAPE_SOURCE', sourceId: '...' }`.
2. –ò–¥–µ—Ç –≤ –ë–î -> –ë–µ—Ä–µ—Ç `username`.
3. –í—ã–∑—ã–≤–∞–µ—Ç `apify.scrapeInstagramUser`.
4. **DATA MAPPING & UPSERT (CRITICAL):**
   - –ü—Ä–æ—Ö–æ–¥–∏—Ç —Ü–∏–∫–ª–æ–º –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ—Å—Ç—ã —Å—Ç–∞—Ä—à–µ 14 –¥–Ω–µ–π (Apify –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –ª–∏—à–Ω–µ–µ).
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `prisma.contentItem.upsert` (–ø–æ `externalId`):
     - –ï—Å–ª–∏ –Ω–µ—Ç -> –°–æ–∑–¥–∞–µ—Ç.
     - –ï—Å–ª–∏ –µ—Å—Ç—å -> –û–±–Ω–æ–≤–ª—è–µ—Ç `mediaUrl`, `caption`.
   - **–í–°–ï–ì–î–ê** —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ `ContentMetric` —Å —Ç–µ–∫—É—â–∏–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏ (views, likes).
5. –í –∫–æ–Ω—Ü–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç `Source.lastScrapedAt = now()`.

### –≠–¢–ê–ü 4: Testing Script
–°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç `scripts/test-scrape.ts` (–∏–ª–∏ Action), –∫–æ—Ç–æ—Ä—ã–π:
1. –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π Source (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–≤–æ–π –∏–ª–∏ `neiro_gleb`).
2. –ö–∏–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å.
3. –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `ContentItem` –∏ `ContentMetric`.

## üõ° –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –ù–ê–î–ï–ñ–ù–û–°–¢–ò (SOLIS)
- **Error Handling:** –ï—Å–ª–∏ Apify –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, Login Required), –í–æ—Ä–∫–µ—Ä –ù–ï –¥–æ–ª–∂–µ–Ω –ø–∞–¥–∞—Ç—å. –û–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–º–µ—Ç–∏—Ç—å Source –∫–∞–∫ `ERROR` (–∏–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å –ª–æ–≥) –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É.
- **Limits:** –ù–µ –∑–∞–ø—É—Å–∫–∞–π –±–æ–ª–µ–µ 1 –∑–∞–¥–∞—á–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (–≤ –æ—á–µ—Ä–µ–¥–∏ `concurrency: 1`), —á—Ç–æ–±—ã –º—ã –Ω–µ —Å–æ–∂–≥–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã Apify –ø—Ä–∏ —Ç–µ—Å—Ç–∞—Ö.

–í–û–¢ –¢–ê–ö –ü–û–ù–Ø–õ–ò –ó–ê–î–ê–ß–£ 

1. –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (Apify Instagram Scraper)
–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π "–∞–∫—Ç–µ—Ä" (Actor) –Ω–∞ Apify. –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π ‚Äî —ç—Ç–æ apify/instagram-scraper (–∏–ª–∏ instagram-post-scraper).

–õ–æ–≥–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API (Input Config): –ß—Ç–æ–±—ã –Ω–µ —Å–∫–∞—á–∏–≤–∞—Ç—å –≤–µ—Å—å –∞–∫–∫–∞—É–Ω—Ç (–≥–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ç—ã—Å—è—á–∏ –ø–æ—Å—Ç–æ–≤ –∑–∞ 5 –ª–µ—Ç), –º—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã.

–°—Ç—Ä–∞—Ç–µ–≥–∏—è "–°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ" (Sliding Window): –ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≥–æ–≤–æ—Ä–∏—Ç—å "–¥–∞–π –≤—Å–µ". –ú—ã –≥–æ–≤–æ—Ä–∏–º: "–î–∞–π –ø–æ—Å—Ç—ã —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 –¥–Ω–µ–π" (–±–µ—Ä–µ–º —Å –∑–∞–ø–∞—Å–æ–º 1 –¥–µ–Ω—å).

–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Apify:

username: ["target_account"]

resultsLimit: 100 (–∏–ª–∏ 200, –µ—Å–ª–∏ –ø–æ—Å—Ç–∏—Ç –∫–∞–∫ –ø—É–ª–µ–º–µ—Ç).

searchType: "posts" (–Ω–∞–º –Ω—É–∂–Ω—ã –ø–æ—Å—Ç—ã/—Ä–∏–ª—Å).

proxy: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (Apify Residential Proxy), –∏–Ω–∞—á–µ Instagram –∑–∞–±–∞–Ω–∏—Ç –Ω–∞—Å –ø–æ—Å–ª–µ 5-–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

–ß—Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º –Ω–∞ –≤—ã—Ö–æ–¥–µ (Output): JSON, –≥–¥–µ —É –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞ –µ—Å—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID Instagram) –∏ shortCode (–±—É–∫–≤–µ–Ω–Ω—ã–π –∫–æ–¥ –≤ URL). –≠—Ç–æ –±—É–¥—É—Ç –Ω–∞—à–∏ Primary Keys.

2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ "Scheduler -> Queue -> Worker"
–¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–∞–∑–∞–ª –ø—Ä–æ –≤–æ—Ä–∫–µ—Ä—ã. –ü—Ä—è–º–æ–π —Ü–∏–∫–ª for (users) await scrape() ‚Äî —ç—Ç–æ —Å–º–µ—Ä—Ç—å —Å–µ—Ä–≤–µ—Ä–∞.

–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –≤ 00:00:

Scheduler (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫):

–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç CRON.

–î–µ–ª–∞–µ—Ç –≤—ã–±–æ—Ä–∫—É –∏–∑ –ë–î: SELECT * FROM Source WHERE status = 'ACTIVE'.

–ü—Ä–æ–±–µ–≥–∞–µ—Ç—Å—è –ø–æ —Å–ø–∏—Å–∫—É –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ Redis.

–í–∞–∂–Ω–æ: –ù–µ –ø–∏—Ö–∞–µ–º –≤—Å–µ –≤ –æ–¥–Ω—É –∑–∞–¥–∞—á—É. 1 –∏—Å—Ç–æ—á–Ω–∏–∫ = 1 –∑–∞–¥–∞—á–∞.

–ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∏ –≤ Redis: { type: 'SCRAPE_SOURCE', sourceId: '123', username: 'neiro_gleb', days: 14 }.

Queue Manager (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–æ–π):

–£ –Ω–∞—Å 100+ —é–∑–µ—Ä–æ–≤, —ç—Ç–æ 100+ –∑–∞–¥–∞—á.

–ú—ã –Ω–µ –º–æ–∂–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Ö –≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (Apify –≤—ã—Å—Ç–∞–≤–∏—Ç –¥–∏–∫–∏–π —Å—á–µ—Ç –∑–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ –º—ã —É–ø—Ä–µ–º—Å—è –≤ –ª–∏–º–∏—Ç—ã).

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º concurrency: 5 (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ 5 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ). –û—Å—Ç–∞–ª—å–Ω—ã–µ –∂–¥—É—Ç –≤ –æ—á–µ—Ä–µ–¥–∏.

Worker (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å):

–ë–µ—Ä–µ—Ç –∑–∞–¥–∞—á—É.

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ Apify.

–ñ–î–ï–¢ (Polling), –ø–æ–∫–∞ Apify –∑–∞–∫–æ–Ω—á–∏—Ç —Å–±–æ—Ä.

–ü–æ–ª—É—á–∞–µ—Ç JSON —Å –ø–æ—Å—Ç–∞–º–∏.

–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—É Data Mapping & Upsert (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ, —Å–º. –Ω–∏–∂–µ).

3. –õ–æ–≥–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö: "Upsert" –∏ –¢—Ä–µ–Ω–¥—ã
–í–æ—Ç –∑–¥–µ—Å—å –∫—Ä–æ–µ—Ç—Å—è "–º–∞–≥–∏—è" –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –ö–∞–∫ –Ω–∞–º —Å–æ–±–∏—Ä–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã?

–°—Ü–µ–Ω–∞—Ä–∏–π: –í—á–µ—Ä–∞ –º—ã —Å–∫–∞—á–∞–ª–∏ –†–∏–ª—Å. –£ –Ω–µ–≥–æ –±—ã–ª–æ 1000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤. –°–µ–≥–æ–¥–Ω—è –º—ã —Å–Ω–æ–≤–∞ —Å–∫–∞—á–∞–ª–∏ —ç—Ç–æ—Ç –†–∏–ª—Å (—Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–∫–Ω–æ 14 –¥–Ω–µ–π). –£ –Ω–µ–≥–æ 5000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.

–ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–í–Ω—É—Ç—Ä–∏ –í–æ—Ä–∫–µ—Ä–∞):

–ü–æ–ª—É—á–∏–ª–∏ –º–∞—Å—Å–∏–≤ –∏–∑ 20 –ø–æ—Å—Ç–æ–≤ –æ—Ç Apify.

–ò–¥–µ–º –ø–æ –º–∞—Å—Å–∏–≤—É:

–ò—â–µ–º –ø–æ—Å—Ç –≤ –Ω–∞—à–µ–π –ë–î –ø–æ externalId (ID –ò–Ω—Å—Ç–∞–≥—Ä–∞–º–∞).

–ï–°–õ–ò –ù–ï–¢ (–ù–æ–≤—ã–π –ø–æ—Å—Ç):

–°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å ContentItem.

–°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞—Ç—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∫–∞—Ä—Ç–∏–Ω–∫—É, —Ç–µ–∫—Å—Ç.

–ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (View: 5000).

–ú–∞—Ä–∫–µ—Ä: isNew: true.

–ï–°–õ–ò –ï–°–¢–¨ (–°—Ç–∞—Ä—ã–π –ø–æ—Å—Ç):

–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏. –ë—ã–ª–æ 1000, —Å—Ç–∞–ª–æ 5000.

–í—ã—á–∏—Å–ª—è–µ–º –í–µ–ª–æ—Å–∏—Ç–∏ (–°–∫–æ—Ä–æ—Å—Ç—å —Ä–æ—Å—Ç–∞): Growth = NewViews - OldViews.

–û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –ë–î –Ω–æ–≤—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏.

–í–∞–∂–Ω–æ –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤: –ú—ã –º–æ–∂–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É MetricSnapshot (–î–∞—Ç–∞: 24.01, Views: 5000), —á—Ç–æ–±—ã —Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏. –õ–∏–±–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å lastUpdated.

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã (Clean up): –ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤–µ—á–Ω–æ. –ï—Å–ª–∏ –ø–æ—Å—Ç—É –±–æ–ª—å—à–µ 30 –¥–Ω–µ–π, –æ–Ω –≤—ã–ø–∞–¥–∞–µ—Ç –∏–∑ –Ω–∞—à–µ–π "–∞–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏". –ù–æ —É–¥–∞–ª—è—Ç—å –µ–≥–æ –∏–∑ –±–∞–∑—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –ø—É—Å—Ç—å –ª–µ–∂–∏—Ç –¥–ª—è –∞—Ä—Ö–∏–≤–∞.

4. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î (–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å—Ö–µ–º—ã)
–ß—Ç–æ–±—ã —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–∞–º –Ω—É–∂–Ω—ã —Ç–∞–∫–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ Prisma:

Source (–ò—Å—Ç–æ—á–Ω–∏–∫–∏)

id, username, platform (instagram), status (active/error), lastScrapedAt.

ContentItem (–ü–æ—Å—Ç—ã/–†–∏–ª—Å)

id

sourceId (Link to Source)

externalId (–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ –ò–Ω—Å—Ç—ã) ‚Äî –ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –ø–æ–∏—Å–∫–∞!

type (REEL, CAROUSEL, IMAGE)

publishedAt (–î–∞—Ç–∞ –ø–æ—Å—Ç–∞ –≤ –∏–Ω—Å—Ç–µ)

mediaUrl (–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É/–≤–∏–¥–µ–æ)

caption (–¢–µ–∫—Å—Ç)

–¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏: views, likes, comments, shares.

TrendMetric (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Å—É–ø–µ—Ä-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏)

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –≤–∏–¥–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫ "–∫–∞–∫ —Ä–æ—Å —ç—Ç–æ—Ç —Ä–∏–ª—Å –ø–æ –¥–Ω—è–º", –Ω—É–∂–Ω–∞ —ç—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞.

contentId, date, views, likes.

–ü–∏—à–µ–º —Å—é–¥–∞ —Å—Ç—Ä–æ–∫—É –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ.

5. –†–∏—Å–∫–∏ –∏ –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏
Apify Cost:

–°–±–æ—Ä 100 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ï—Å–ª–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç–µ ~14 –ø–æ—Å—Ç–æ–≤ –∑–∞ 2 –Ω–µ–¥–µ–ª–∏. –≠—Ç–æ 1400 –∑–∞–ø–∏—Å–µ–π –≤ –¥–µ–Ω—å.

Apify –±–µ—Ä–µ—Ç –¥–µ–Ω—å–≥–∏ –∑–∞ Compute Units (–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã). –ï—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ, –≤–æ—Ä–∫–µ—Ä –≤–∏—Å–∏—Ç –¥–æ–ª–≥–æ -> –ø–ª–∞—Ç–∏–º –±–æ–ª—å—à–µ.

–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–µ (–Ω–æ –¥–æ—Ä–æ–≥–∏–µ) –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ –ø–æ–¥–æ–±—Ä–∞—Ç—å –æ—á–µ–Ω—å –ª–µ–≥–∫–∏–π Actor, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ JSON –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–µ–¥–∏–∞ (–º–µ–¥–∏–∞ –∫–∞—á–∞–µ–º —Å–∞–º–∏, –µ—Å–ª–∏ –Ω–∞–¥–æ, –∏–ª–∏ —Ö—Ä–∞–Ω–∏–º —Å—Å—ã–ª–∫—É).

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ / –õ–æ–≥–∏–Ω:

Apify —Ç—Ä–µ–±—É–µ—Ç –∫—É–∫–∏ (cookies) –¥–ª—è –≤—Ö–æ–¥–∞, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –ø–∞—Ä—Å–∏—Ç—å –≥–ª—É–±–æ–∫–æ.

–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º "Public Guest" (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω) –∏–ª–∏ –∫—É–ø–∏—Ç—å —Ö–æ—Ä–æ—à–∏–µ —Å–µ—Å—Å–∏–æ–Ω–Ω—ã–µ –∫—É–∫–∏. –û–±—ã—á–Ω–æ Apify Actors —É–º–µ—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞.

–î—É–±–ª–∏–∫–∞—Ç—ã:

–ò–Ω—Å—Ç–∞–≥—Ä–∞–º –∏–Ω–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç ID –∏–ª–∏ —Å—Å—ã–ª–∫–∏.

–†–µ—à–µ–Ω–∏–µ: –ü–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ shortCode (—á–∞—Å—Ç—å URL: instagram.com/p/Cw8...), –æ–Ω –º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–∂–µ –≤—Å–µ–≥–æ.



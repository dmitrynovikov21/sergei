# MISSION 06: ADMIN DASHBOARD

## üéØ –¶–ï–õ–¨
–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
1. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –±–∞–ª–∞–Ω—Å–∞–º–∏.
2. –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (AI-—Ä–∞—Å—Ö–æ–¥—ã + –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è).
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥–µ–ª—è–º (–∫–∞–∫–∞—è –º–æ–¥–µ–ª—å —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç).
4. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ä—É—á–Ω—É—é –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

## üõ† –ò–ù–°–¢–†–£–ú–ï–ù–¢–´
- **Next.js Server Components**: –î–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–∞–±–ª–∏—Ü.
- **Recharts**: –î–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
- **Server Actions**: –î–ª—è —Ä—É—á–Ω–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞.

## üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –≠–¢–ê–ü 1: –ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–∞
1. –°–æ–∑–¥–∞–π middleware check: —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `role === "ADMIN"` –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ `/dashboard/admin`.
2. –ï—Å–ª–∏ –Ω–µ –∞–¥–º–∏–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/dashboard`.

### –≠–¢–ê–ü 2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ users
1. –°–æ–∑–¥–∞–π `/dashboard/admin/users`.
2. –ü–æ–ª—É—á–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –ë–î (`prisma.user.findMany`).
3. –û—Ç–æ–±—Ä–∞–∑–∏ —Ç–∞–±–ª–∏—Ü—É:
   - Email, Role, Credits, Created At.
   - –ö–Ω–æ–ø–∫–∞ "Add Credits" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### –≠–¢–ê–ü 3: –ú–æ–¥–∞–ª–∫–∞ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
1. –ü—Ä–∏ –∫–ª–∏–∫–µ "Add Credits" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞.
2. –ê–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç —Å—É–º–º—É.
3. Server Action `adminAddCredits(userId, amount)`.
4. –ü–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Üí –∑–∞–ø–∏—Å—å –≤ `CreditTransaction` —Å —Ç–∏–ø–æ–º `admin_grant`.

### –≠–¢–ê–ü 4: –°—Ç—Ä–∞–Ω–∏—Ü–∞ transactions
1. –°–æ–∑–¥–∞–π `/dashboard/admin/transactions`.
2. –ü–æ–ª—É—á–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ `TokenTransaction` –∏ `CreditTransaction`.
3. –û—Ç–æ–±—Ä–∞–∑–∏ —Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É:
   - User, Type (AI usage / Deposit / Admin grant), Amount, Date.

### –≠–¢–ê–ü 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
1. –°–æ–∑–¥–∞–π `/dashboard/admin/stats`.
2. –í—ã—á–∏—Å–ª–∏:
   - –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ (—Å—É–º–º–∞ –≤—Å–µ—Ö `deposit`).
   - –û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ AI (—Å—É–º–º–∞ –≤—Å–µ—Ö `TokenTransaction.totalCost`).
   - –¢–æ–ø-3 —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö –º–æ–¥–µ–ª–µ–π.
3. –û—Ç–æ–±—Ä–∞–∑–∏ —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ–∏–∫–∏ (Recharts).

## üß† –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê
- **RBAC**: –¢–æ–ª—å–∫–æ `ADMIN` –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
- **Audit Log**: –ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω –ø–æ–ø–æ–ª–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ —ç—Ç–æ —Å–¥–µ–ª–∞–ª.

## üö¶ DEFINITION OF DONE
1. –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å `/dashboard/admin/users` –∏ –≤–∏–¥–µ—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
2. –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
3. –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –º–æ–¥–µ–ª—è–º.

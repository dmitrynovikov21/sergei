#!/usr/bin/expect -f
# Usage: ./scp_file.exp <host> <password> <local_file> <remote_path>

set timeout 120
set host [lindex $argv 0]
set password [lindex $argv 1]
set local_file [lindex $argv 2]
set remote_path [lindex $argv 3]

spawn scp -o StrictHostKeyChecking=no $local_file root@$host:$remote_path
expect "password:"
send "$password\r"
expect eof
